<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="Scripts" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://aaltoscicomp.github.io/python-for-scicomp/scripts/" />
<meta property="og:site_name" content="Python for Scientific Computing" />
<meta property="og:description" content="Why scripts?: So far we have been learning Python using Jupyter notebooks. It is very convenient: it allowed us to experiment and prototype Python code so we may think that is more than enough for ..." />
<meta name="description" content="Why scripts?: So far we have been learning Python using Jupyter notebooks. It is very convenient: it allowed us to experiment and prototype Python code so we may think that is more than enough for ..." />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scripts &mdash; Python for Scientific Computing  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_lesson.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_rtd_theme_ext_color_contrast.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/logo-hexagons-02-compact.svg.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/minipres.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="SciPy" href="../scipy/" />
    <link rel="prev" title="Productivity tools" href="../productivity/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Python for Scientific Computing
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The lesson</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../python/">Introduction to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter/">Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../numpy/">NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../numpy-advanced/">Advanced NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandas/">Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-visualization/">Data visualization with Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-formats/">Data formats with Pandas and Numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../productivity/">Productivity tools</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#why-scripts">Why scripts?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#from-jupyter-notebooks-to-python-scripts">From Jupyter notebooks to Python scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#save-as-python-script">Save as Python script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercises-1">Exercises 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-arguments-with-sys-argv">Command line arguments with <code class="xref py py-data docutils literal notranslate"><span class="pre">sys.argv</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#parsing-command-line-arguments-with-argparse">Parsing command line arguments with <code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercises-2">Exercises 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-larger-option-lists-using-config-files">Load larger option lists using config files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercises-3-optional">Exercises 3 (optional)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../scipy/">SciPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries/">Library ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies/">Dependency management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../binder/">Binder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel/">Parallel programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packaging/">Packaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-apis/">Web APIs with Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/">Software installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/">Quick reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/">List of exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor’s guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Python for Scientific Computing</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Scripts</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/AaltoSciComp/python-for-scicomp/blob/master/content/scripts.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scripts">
<span id="id1"></span><h1>Scripts<a class="headerlink" href="#scripts" title="Permalink to this heading"></a></h1>
<div class="admonition-questions questions admonition" id="questions-0">
<p class="admonition-title">Questions</p>
<ul class="simple">
<li><p>Why are command line programs useful, compared to Jupyter
notebooks and similar?</p></li>
<li><p>How to create a Python script?</p></li>
<li><p>How to generalize a Python script?</p></li>
</ul>
</div>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Learn how to streamline your Python notebooks by creating repeatable Python scripts</p></li>
<li><p>Learn how to import other Python files</p></li>
<li><p>Learn to parse command line arguments in Python</p></li>
</ul>
</div>
<section id="why-scripts">
<h2>Why scripts?<a class="headerlink" href="#why-scripts" title="Permalink to this heading"></a></h2>
<p>So far we have been learning Python using Jupyter notebooks. It is very convenient: it allowed us to experiment and prototype Python code so we may think that is more than enough for your day to day work.</p>
<p>But after several weeks of hard work with Python, you may end up:</p>
<ul class="simple">
<li><p>either with 10 different notebooks (so that you can run them concurrently)</p></li>
<li><p>or with a very long notebook which is becoming hardly readable!</p></li>
</ul>
<p>Let’s imagine you have created 10 notebooks to run for 10 different input parameters and now you are willing to experiment with 1000 sets of input parameters.
Suppose you find a bug in the original notebook and need to rerun everything: are you willing to re-create manually your 1000 notebooks?</p>
<p>In this episode, we will learn how to automate your work using Python scripts so that</p>
<ul class="simple">
<li><p>you do not need to manually configure your notebooks to be able to run with different parameters</p></li>
<li><p>can easily run you work via other tools, such as on computing clusters.</p></li>
</ul>
</section>
<section id="from-jupyter-notebooks-to-python-scripts">
<h2>From Jupyter notebooks to Python scripts<a class="headerlink" href="#from-jupyter-notebooks-to-python-scripts" title="Permalink to this heading"></a></h2>
</section>
<section id="save-as-python-script">
<h2>Save as Python script<a class="headerlink" href="#save-as-python-script" title="Permalink to this heading"></a></h2>
<p>Jupyter notebooks can be parameterized for instance using <a class="reference external" href="https://papermill.readthedocs.io/en/latest/">papermill</a>. It can be an attractive approach when you have short notebooks (to generate automatically plots/reports) but as soon as you have more complex tasks to execute, we strongly recommend to generate Python scripts. This will also force you to modularize your code.  See <a class="reference external" href="https://coderefinery.github.io/modular-type-along/">CodeRefinery’s lesson on Modular code development</a>.</p>
<p>Within JupyterLab, you can export any Jupyter notebook to a Python script:</p>
<figure class="align-default" id="id2">
<img alt="https://jupyterlab.readthedocs.io/en/stable/_images/exporting-menu.png" src="https://jupyterlab.readthedocs.io/en/stable/_images/exporting-menu.png" />
<figcaption>
<p><span class="caption-text">Select File (top menu bar) → Export Notebook as → <strong>Export notebook to Executable Script</strong>.</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Actually, you could also export your notebook in many other formats.
Check the <a class="reference external" href="https://jupyterlab.readthedocs.io/en/stable/user/export.html">JupyterLab documentation</a> for more information.
If you are working by the command line (File → New → Terminal), you can also convert files in the terminal by running:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>jupyter<span class="w"> </span>nbconvert<span class="w"> </span>--to<span class="w"> </span>script<span class="w"> </span>your_notebook_name.ipynb
</pre></div>
</div>
</section>
<section id="exercises-1">
<h2>Exercises 1<a class="headerlink" href="#exercises-1" title="Permalink to this heading"></a></h2>
<div class="admonition-scripts-1 exercise important admonition" id="exercise-0">
<p class="admonition-title">Scripts-1</p>
<ol class="arabic">
<li><p>Download the <a class="reference download internal" download="" href="../_downloads/4b858dab9366f77b3641c99adece5fd2/weather_observations.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">weather_observations.ipynb</span></code></a> and the weather_data file and upload them to your Jupyterlab. The script plots the temperature data for Tapiola in Espoo. The data is originally from <a class="reference external" href="https://rp5.kz">rp5.kz</a> and was slightly adjusted for this lecture.</p>
<p><strong>Hint:</strong> Copy the URL above (right-click) and in JupyterLab, use
File → Open from URL → Paste the URL.  It will both download it to
the directory JupyterLab is in and open it for you.</p>
</li>
<li><p>Open a terminal in Jupyter: File → New Launcher, then click
“Terminal” there. (if you do it this way, it will be in the right
directory.  File → New → Terminal might not be.)</p></li>
<li><p>Convert the Jupyter script to a Python script by calling:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>jupyter<span class="w"> </span>nbconvert<span class="w"> </span>--to<span class="w"> </span>script<span class="w"> </span>weather_observations.ipynb
</pre></div>
</div>
</li>
<li><p>Run the script (note: you may have <code class="docutils literal notranslate"><span class="pre">python3</span></code> rather than <code class="docutils literal notranslate"><span class="pre">python</span></code>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>weather_observations.py
</pre></div>
</div>
</li>
</ol>
</div>
</section>
<section id="command-line-arguments-with-sys-argv">
<h2>Command line arguments with <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.argv" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.argv</span></code></a><a class="headerlink" href="#command-line-arguments-with-sys-argv" title="Permalink to this heading"></a></h2>
<p>We now have a Python script that is callable from the command line (e.g. for use on an HPC system).
However, this code is still not adjustable, as we still need to have a copy for each single
time range we want to plot, or need to modify our file whenever we want to just change parameters.
<strong>What we need is to allow the code to do something different based on something outside the code itself</strong>: in this case, to
plot information for different time ranges. This can be achieved by
using Pythons <a class="reference external" href="https://docs.python.org/3/library/sys.html#module-sys" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a> package, which provides access to arguments given to the Python interpreter at
startup in the <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.argv" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.argv</span></code></a> list. The first (i.e. <code class="docutils literal notranslate"><span class="pre">sys.argv[0]</span></code> entry of this array is the script that is running,
and any further argument (separated by space) is appended to this list, like such:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>my_script.py<span class="w"> </span>A<span class="w"> </span>B
<span class="gp">$ </span><span class="c1"># sys.argv[1] is &#39;A&#39;</span>
<span class="gp">$ </span><span class="c1"># sys.argv[2] is &#39;B&#39;</span>
</pre></div>
</div>
<p>Lets see how it works: We modify the <strong>weather_observations.py</strong> script such that we allow start
and end times as well as the output file to be passed in as arguments
to the function.  Open it (find the <code class="docutils literal notranslate"><span class="pre">.py</span></code> file from the JupyterLab
file browser) and make these edits:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="kn">import</span> <span class="nn">sys</span>
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># define the start and end time for the plot</span>
<span class="hll"><span class="n">start_date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span class="hll"><span class="n">end_date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span class="o">...</span>
<span class="hll">
</span><span class="c1"># select the data</span>
<span class="n">weather</span> <span class="o">=</span> <span class="n">weather</span><span class="p">[</span><span class="n">weather</span><span class="p">[</span><span class="s1">&#39;Local time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span><span class="n">end_date</span><span class="p">)]</span>
<span class="o">...</span>

<span class="c1"># save the figure</span>
<span class="hll"><span class="n">output_file_name</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span class="hll"><span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_file_name</span><span class="p">)</span>
</span></pre></div>
</div>
<p>We can try it out (see the file <code class="docutils literal notranslate"><span class="pre">spring_in_tapiola.png</span></code> made in the
file browser):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>weather_observations.py<span class="w"> </span><span class="m">01</span>/03/2021<span class="w"> </span><span class="m">31</span>/05/2021<span class="w"> </span>spring_in_tapiola.png
</pre></div>
</div>
<div class="admonition-discussion discussion important admonition" id="discussion-0">
<p class="admonition-title">Discussion</p>
<ul class="simple">
<li><p>Does it work?</p></li>
<li><p>Why is this better than modifying the script every time I want it to
plot data for a different period?</p></li>
<li><p>What problems do you expect when using this approach (using <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.argv" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.argv</span></code></a>)?</p></li>
</ul>
</div>
<p>This approach is brittle and more robust solutions exist that allow you to fully
customize your scripts and generate help texts at the same time:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/argparse.html">argparse</a>:
built-in to Python, this is the one that we will show below.</p></li>
<li><p><a class="reference external" href="http://docopt.org/">doctopt</a>: you write the help text and this generates a parser for you.</p></li>
<li><p><a class="reference external" href="https://click.palletsprojects.com/">click</a>: another nice
library for command line interfaces - very easy to use.</p></li>
</ul>
</section>
<section id="parsing-command-line-arguments-with-argparse">
<h2>Parsing command line arguments with <a class="reference external" href="https://docs.python.org/3/library/argparse.html#module-argparse" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a><a class="headerlink" href="#parsing-command-line-arguments-with-argparse" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://docs.python.org/3/library/argparse.html#module-argparse" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Argparse</span></code></a> not only gives you descriptive command line arguments, it also automatically
generates a <code class="docutils literal notranslate"><span class="pre">--help</span></code> option for you. To use <code class="docutils literal notranslate"><span class="pre">argparse</span></code> you first set up a parser
by calling <a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">parser</span> <span class="pre">=</span> <span class="pre">argparse.ArgumentParser()</span></code></a> and then you add arguments using
<a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.add_argument" title="(in Python v3.12)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parser.add_argument(args)</span></code></a>. There are two different types of arguments:</p>
<ul class="simple">
<li><p>Positional arguments</p></li>
<li><p>Optional arguments</p></li>
</ul>
<p><strong>Positional arguments</strong> are detected by their order, while <strong>optional arguments</strong> need to be
given with their respective flags ( like <code class="docutils literal notranslate"><span class="pre">--name</span></code> or <code class="docutils literal notranslate"><span class="pre">-n</span></code>).
The following example would parse a positional argument <code class="docutils literal notranslate"><span class="pre">Name</span></code> of type <code class="docutils literal notranslate"><span class="pre">string</span></code>
and an optional argument <code class="docutils literal notranslate"><span class="pre">date</span></code> of type <code class="docutils literal notranslate"><span class="pre">string</span></code> which defaults to <code class="docutils literal notranslate"><span class="pre">01/01/2000</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="hll"><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
</span><span class="c1"># One positional and one optional argument</span>
<span class="hll"><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;N&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The name of the subject&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s1">&#39;--date&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">string</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;01/01/2000&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Birth date of the subject&quot;</span><span class="p">)</span>
</span>
<span class="hll"><span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; was born on &quot;</span> <span class="o">+</span> <span class="n">args</span><span class="o">.</span><span class="n">date</span><span class="p">)</span>
</pre></div>
</div>
<p>If this code was in <code class="docutils literal notranslate"><span class="pre">birthday.py</span></code> and we would call <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">birthday.py</span> <span class="pre">--help</span></code> it
would show the following message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>birthday.py<span class="w"> </span>--help
<span class="go">usage: birthday.py [-h] [-d DATE] N</span>

<span class="go">positional arguments:</span>
<span class="go">  N                     The name of the subject</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  -d DATE, --date DATE  Birth date of the subject</span>
</pre></div>
</div>
</section>
<section id="exercises-2">
<h2>Exercises 2<a class="headerlink" href="#exercises-2" title="Permalink to this heading"></a></h2>
<div class="admonition-scripts-2 exercise important admonition" id="exercise-1">
<p class="admonition-title">Scripts-2</p>
<ol class="arabic simple">
<li><p>Take the Python script (<code class="docutils literal notranslate"><span class="pre">weather_observations.py</span></code>) we have written in the preceding exercise and use
<a class="reference external" href="https://docs.python.org/3/library/argparse.html#module-argparse" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> to specify the input (URL) and output files and allow the start and end dates to be set.</p>
<ul class="simple">
<li><p>Hint: try not to do it all at once, but add one or two arguments, test, then add more, and so on.</p></li>
<li><p>Hint: The input and output filenames make sense as positional arguments, since they must always be given.  Input is usually first, then output.</p></li>
<li><p>Hint: The start and end dates should be optional parameters with the defaults as they are in the current script.</p></li>
</ul>
</li>
<li><p>Execute your script for a few different time intervals (e.g. from January 2019 to June 2020, or from May 2020 to October 2020).
Also try using this data for Cairo: <code class="docutils literal notranslate"><span class="pre">https://raw.githubusercontent.com/AaltoSciComp/python-for-scicomp/master/resources/data/scripts/weather_cairo.csv</span></code></p></li>
</ol>
</div>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="hll"><span class="kn">import</span> <span class="nn">argparse</span>
</span>
<span class="hll"><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
</span><span class="hll"><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Input data file&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Output plot file&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="s2">&quot;--start&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;01/01/2019&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Start date in DD/MM/YYYY format&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-e&quot;</span><span class="p">,</span> <span class="s2">&quot;--end&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;16/10/2021&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;End date in DD/MM/YYYY format&quot;</span><span class="p">)</span>
</span>
<span class="hll"><span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</span>
<span class="c1"># load the data</span>
<span class="hll"><span class="n">weather</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">,</span><span class="n">comment</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>
</span>
<span class="c1"># define the start and end time for the plot</span>
<span class="hll"><span class="n">start_date</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span class="hll"><span class="n">end_date</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span>
<span class="c1"># preprocess the data</span>
<span class="n">weather</span><span class="p">[</span><span class="s1">&#39;Local time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">weather</span><span class="p">[</span><span class="s1">&#39;Local time&#39;</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># select the data</span>
<span class="n">weather</span> <span class="o">=</span> <span class="n">weather</span><span class="p">[</span><span class="n">weather</span><span class="p">[</span><span class="s1">&#39;Local time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span><span class="n">end_date</span><span class="p">)]</span>

<span class="c1"># plot the data</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="c1"># start the figure.</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">weather</span><span class="p">[</span><span class="s1">&#39;Local time&#39;</span><span class="p">],</span> <span class="n">weather</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">])</span>
<span class="c1"># label the axes</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date of observation&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Temperature in Celsius&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Temperature Observations&quot;</span><span class="p">)</span>
<span class="c1"># adjust the date labels, so that they look nicer</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

<span class="c1"># save the figure</span>
<span class="hll"><span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="admonition-discussion discussion important admonition" id="discussion-1">
<p class="admonition-title">Discussion</p>
<p><strong>What was the point of doing this?</strong></p>
<p>Now you can do this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>weather_observations.py<span class="w"> </span>--help
<span class="gp">$ </span>python<span class="w"> </span>weather_observations.py<span class="w"> </span>https://raw.githubusercontent.com/AaltoSciComp/python-for-scicomp/master/resources/data/scripts/weather_tapiola.csv<span class="w"> </span>temperature_tapiola.png
<span class="gp">$ </span>python<span class="w"> </span>weather_observations.py<span class="w"> </span>-s<span class="w"> </span><span class="m">1</span>/12/2020<span class="w"> </span>-e<span class="w"> </span><span class="m">31</span>/12/2020<span class="w"> </span>https://raw.githubusercontent.com/AaltoSciComp/python-for-scicomp/master/resources/data/scripts/weather_tapiola.csv<span class="w"> </span>temperature_tapiola_dec.png
<span class="gp">$ </span>python<span class="w"> </span>weather_observations.py<span class="w"> </span>-s<span class="w"> </span><span class="m">1</span>/2/2021<span class="w"> </span>-e<span class="w"> </span><span class="m">28</span>/2/2021<span class="w"> </span>https://raw.githubusercontent.com/AaltoSciComp/python-for-scicomp/master/resources/data/scripts/weather_tapiola.csv<span class="w"> </span>temperature_tapiola_feb.png
<span class="gp">$ </span>python<span class="w"> </span>weather_observations.py<span class="w"> </span>https://raw.githubusercontent.com/AaltoSciComp/python-for-scicomp/master/resources/data/scripts/weather_cairo.csv<span class="w"> </span>--output<span class="w"> </span>temperature_cairo.png
</pre></div>
</div>
<ul class="simple">
<li><p>We can now process different input files without changing the script.</p></li>
<li><p>We can select multiple time ranges without modifying the script.</p></li>
<li><p>We can easily save these commands to know what we did.</p></li>
<li><p>This way we can also loop over file patterns (using shell loops or similar) or use
the script in a workflow management system and process many files in parallel.</p></li>
<li><p>By changing from <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.argv" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.argv</span></code></a> to <a class="reference external" href="https://docs.python.org/3/library/argparse.html#module-argparse" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> we made the script more robust against
user input errors and also got a help text (accessible via <code class="docutils literal notranslate"><span class="pre">--help</span></code>).</p></li>
</ul>
</div>
</section>
<section id="load-larger-option-lists-using-config-files">
<h2>Load larger option lists using config files<a class="headerlink" href="#load-larger-option-lists-using-config-files" title="Permalink to this heading"></a></h2>
<p>In the above example we only allowed the input and output files along with start and end dates to be selected by command line arguments.
This already leads to a quite large command line call. Now imagine, that we also want to allow the user to select more specific information
from the dataset, define specific X and Y labels, write their own
title etc. Now imagine to put all this into the command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>weather_observations.py<span class="w"> </span>--input<span class="w"> </span>https://raw.githubusercontent.com/AaltoSciComp/python-for-scicomp/master/resources/data/scripts/weather_cairo.csv<span class="w"> </span>--output<span class="w"> </span>rain_in_tapiola.png<span class="w"> </span>--xlabel<span class="w"> </span><span class="s2">&quot;Days in June&quot;</span><span class="w"> </span>--ylabel<span class="w"> </span><span class="s2">&quot;Rainfall in mm&quot;</span><span class="w"> </span>--title<span class="w"> </span><span class="s2">&quot;Rainfall in Cairo&quot;</span><span class="w"> </span>--data_column<span class="w"> </span>RRR<span class="w"> </span>--start<span class="w"> </span><span class="m">01</span>/06/2021<span class="w"> </span>--end<span class="w"> </span><span class="m">30</span>/06/2021
</pre></div>
</div>
<p>This is an even larger line, needs scrolling and becomes quite inconvenient to modify.
Instead of putting all of this into the command line, you could think about storing and modifying the arguments in a config file.
There are several ways, how config files can be stored. You can use a simple <code class="docutils literal notranslate"><span class="pre">Parameter</span> <span class="pre">=</span> <span class="pre">Value</span></code>
format, and parse it yourself, or you can use e.g. the <code class="docutils literal notranslate"><span class="pre">JSON</span></code> or <code class="docutils literal notranslate"><span class="pre">YAML</span></code> formats.
For both parsers exist that can save you some work, and both formats also allow you to use
more complex input data, like lists, or dictionaries. We won’t go into the details of the formats, and will only give
a short example using YAML here.</p>
<p>The YAML file format can be simple or very complex allowing a large variety of data structures to be stored.
One benefit of YAML is that there is already a Python module (<a class="reference external" href="https://pyyaml.org/">yaml</a>) available for parsing it and it
directly parses numbers as numbers and text as strings, making conversions unnecessary (the same is true for JSON
with the <a class="reference external" href="https://docs.python.org/3/library/json.html#module-json" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code></a> package).</p>
<p>The Python module <a class="reference download internal" download="" href="../_downloads/75c4ab69c0f59fbb1589b03be360a485/optionsparser.py"><code class="xref download docutils literal notranslate"><span class="pre">optionsparser.py</span></code></a> provides a simple parser for YAML styled options files.
Similar to argparse, it takes a dict of required options, along with a dict of optional parameters.
Required arguments need to specify a type. Optional argument types are derived from their default values.</p>
<p>In our example above, we could for example add optional parameters that allow the selection of other weather data
from the dataset (precipitation …), set the labels and titles explicitly etc.</p>
<p>In the YAML format, names and values are separated by <code class="docutils literal notranslate"><span class="pre">:</span></code>. Our above example would therefore translate to the following YAML file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">input</span><span class="p">:</span><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">https://raw.githubusercontent.com/AaltoSciComp/python-for-scicomp/master/resources/data/scripts/weather_cairo.csv</span>
<span class="nt">output</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">rain_in_cairo.png</span>
<span class="nt">xlabel</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">Days in June</span>
<span class="nt">ylabel</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">Rainfall in mm</span>
<span class="nt">title</span><span class="p">:</span><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">Rainfall in Cairo</span>
<span class="nt">data_column</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">RRR</span>
<span class="nt">start</span><span class="p">:</span><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">01/06/2021</span>
<span class="nt">end</span><span class="p">:</span><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">30/06/2021</span>
</pre></div>
</div>
</section>
<section id="exercises-3-optional">
<h2>Exercises 3 (optional)<a class="headerlink" href="#exercises-3-optional" title="Permalink to this heading"></a></h2>
<div class="admonition-scripts-3 exercise important admonition" id="exercise-2">
<p class="admonition-title">Scripts-3</p>
<ol class="arabic simple">
<li><p>Download the <a class="reference download external" download="" href="https://raw.githubusercontent.com/AaltoSciComp/python-for-scicomp/master/resources/code/scripts/optionsparser.py"><code class="xref download docutils literal notranslate"><span class="pre">optionsparser.py</span></code></a>
function and load it into your working folder in Jupyterlab (Hint: in JupyterLab, File → Open from URL).
Modify the previous script to use a config file parser to read all arguments. The config file is passed in as a single argument on the command line
(using e.g. <a class="reference external" href="https://docs.python.org/3/library/argparse.html#module-argparse" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.argv" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.argv</span></code></a>) still needs to be read from the command line.</p></li>
<li><p>Run your script with different config files.</p></li>
</ol>
</div>
<div class="admonition-solution solution important dropdown admonition" id="solution-1">
<p class="admonition-title">Solution</p>
<p>The modified <strong>weather_observations.py</strong> script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># coding: utf-8</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="hll"><span class="kn">from</span> <span class="nn">optionsparser</span> <span class="kn">import</span> <span class="n">get_parameters</span>
</span><span class="kn">import</span> <span class="nn">argparse</span> 

<span class="c1"># Lets start reading our confg file. we&#39;ll use argparse to get the config file.</span>
<span class="hll"><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
</span><span class="hll"><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Config File name &quot;</span><span class="p">)</span>
</span><span class="hll"><span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</span>
<span class="c1"># Set optional parameters with default values and required parameter values with their type</span>
<span class="hll"><span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="hll">           <span class="s2">&quot;xlabel&quot;</span>      <span class="p">:</span> <span class="s2">&quot;Date of observation&quot;</span><span class="p">,</span>
</span><span class="hll">           <span class="s2">&quot;title&quot;</span>       <span class="p">:</span> <span class="s2">&quot;Weather Observations&quot;</span><span class="p">,</span>
</span><span class="hll">           <span class="s2">&quot;start&quot;</span>       <span class="p">:</span> <span class="s2">&quot;01/06/2021&quot;</span><span class="p">,</span>
</span><span class="hll">           <span class="s2">&quot;end&quot;</span>         <span class="p">:</span> <span class="s2">&quot;01/10/2021&quot;</span><span class="p">,</span>
</span><span class="hll">           <span class="s2">&quot;output&quot;</span>      <span class="p">:</span> <span class="s2">&quot;weather.png&quot;</span><span class="p">,</span>
</span><span class="hll">           <span class="s2">&quot;ylabel&quot;</span>      <span class="p">:</span> <span class="s2">&quot;Temperature in Celsius&quot;</span><span class="p">,</span>
</span><span class="hll">           <span class="s2">&quot;data_column&quot;</span> <span class="p">:</span> <span class="s2">&quot;T&quot;</span><span class="p">,</span>
</span><span class="hll">           <span class="p">}</span>
</span><span class="hll">
</span><span class="hll"><span class="n">required</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="hll">           <span class="s2">&quot;input&quot;</span>  <span class="p">:</span> <span class="nb">str</span>
</span><span class="hll">           <span class="p">}</span>
</span>           
<span class="c1"># now, parse the config file</span>
<span class="hll"><span class="n">parameters</span> <span class="o">=</span> <span class="n">get_parameters</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="n">required</span><span class="p">,</span> <span class="n">defaults</span><span class="p">)</span>
</span>
<span class="c1"># load the data</span>
<span class="hll"><span class="n">weather</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">input</span><span class="p">,</span><span class="n">comment</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>
</span>
<span class="c1"># obtain start and end date</span>
<span class="hll"><span class="n">start_date</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span class="hll"><span class="n">end_date</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span>
<span class="c1"># Data preprocessing</span>
<span class="n">weather</span><span class="p">[</span><span class="s1">&#39;Local time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">weather</span><span class="p">[</span><span class="s1">&#39;Local time&#39;</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># select the data</span>
<span class="n">weather</span> <span class="o">=</span> <span class="n">weather</span><span class="p">[</span><span class="n">weather</span><span class="p">[</span><span class="s1">&#39;Local time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span><span class="n">end_date</span><span class="p">)]</span>

<span class="c1"># Data plotting</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="c1"># start the figure.</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">weather</span><span class="p">[</span><span class="s1">&#39;Local time&#39;</span><span class="p">],</span> <span class="n">weather</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">])</span>
<span class="c1"># label the axes</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date of observation&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Temperature in Celsius&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Temperature Observations&quot;</span><span class="p">)</span>
<span class="c1"># adjust the date labels, so that they look nicer</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>


<span class="c1"># save the figure</span>
<span class="hll"><span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<p>What did this config file parser get us?  Now, we have separated the
code from the configuration.  We could save all the configuration in
version control - separately and have one script that runs them.  If
done right, our work could be much more reproducible and
understandable.</p>
<div class="admonition-further-reading admonition">
<p class="admonition-title">Further reading</p>
<ul class="simple">
<li><p>Linking Jupyterlab notebooks to python scripts (making linking <code class="docutils literal notranslate"><span class="pre">.py</span></code>- and <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code>-files easier) using <a class="reference external" href="https://jupytext.readthedocs.io/en/latest/paired-notebooks.html">jupytext</a></p></li>
<li><p>The <a class="reference external" href="https://en.wikipedia.org/wiki/YAML">wikipedia page about YAML</a> contains a lot of additional information on the YAML syntax.</p></li>
<li><p><a class="reference external" href="https://coderefinery.github.io/reproducible-research/">The Coderefinery Lesson about reproducible research</a> can give additional information about good coding practices and workflow automation.</p></li>
<li><p><a class="reference external" href="https://coderefinery.github.io/modular-type-along/">CodeRefinery’s lesson on Modular code development</a></p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../productivity/" class="btn btn-neutral float-left" title="Productivity tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../scipy/" class="btn btn-neutral float-right" title="SciPy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023, The contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>