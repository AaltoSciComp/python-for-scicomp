# Plotting with [Vega-Altair](https://altair-viz.github.io/)

:::{instructor-note}
- 10 min: Introduction
- 10 min: Type-along (creating a first plot)
- 20 min: Exercise (using visual channels)
- 20 min: Exercise (adapting a gallery example and customizing)
- 10 min: Key points, discussion, and Q&A
:::


## Repeatability/reproducibility

From [Claus O. Wilke: "Fundamentals of Data Visualization"](https://clauswilke.com/dataviz/):

> *One thing I have learned over the years is that automation is your friend. I
> think figures should be autogenerated as part of the data analysis pipeline
> (which should also be automated), and they should come out of the pipeline
> ready to be sent to the printer, no manual post-processing needed.*

- **Try to minimize manual post-processing**. This could bite you when you need to regenerate 50
  figures one day before submission deadline or regenerate a set of figures
  after the person who created them left the group.
- There is not the one perfect language and **not the one perfect library** for everything.
- Within Python, many libraries exist:
  - [Vega-Altair](https://altair-viz.github.io/gallery/index.html):
    declarative visualization, statistics built in
  - [Matplotlib](https://matplotlib.org/stable/gallery/index.html):
    probably the most standard and most widely used
  - [Seaborn](https://seaborn.pydata.org/examples/index.html):
    high-level interface to Matplotlib, statistical functions built in
  - [Plotly](https://plotly.com/python/):
    interactive graphs
  - [Bokeh](https://demo.bokeh.org/):
    also here good for interactivity
  - [plotnine](https://plotnine.readthedocs.io/):
    implementation of a grammar of graphics in Python, it is based on [ggplot2](https://ggplot2.tidyverse.org/)
  - [ggplot](https://yhat.github.io/ggpy/):
    R users will be more at home
  - [PyNGL](https://www.pyngl.ucar.edu/Examples/gallery.shtml):
    used in the weather forecast community
  - [K3D](https://k3d-jupyter.org/gallery/index.html):
    Jupyter Notebook extension for 3D visualization
  - ...
- Two main families of libraries: procedural (e.g. Matplotlib) and declarative (e.g. Vega-Altair).


## Why are we starting with [Vega-Altair](https://altair-viz.github.io/)?

- Concise and powerful
- "Simple, friendly and consistent API" allows us to focus on the data
  visualization part and get started without too much Python knowledge
- The way it **combines visual channels with data columns** can feel intuitive
- Interfaces very nicely with [pandas](https://pandas.pydata.org/)
- Easy to change figures
- Good documentation
- Open source
- Makes it easy to save figures in a number of formats
- Easy to save interactive visualizations to be used in websites


## Exercise

In this exercise we can try to adapt existing scripts to either **tweak how the
plot looks** or to **modify the input data**.  This is very close to real life:
there are so many options and possibilities and it is almost impossible to
remember everything so this strategy is useful to practice:
- Select an example that is close to what you have in mind
- Being able to adapt it to your needs
- Being able to search for help
- Being able to understand help request answers (not easy)

:::{challenge} Exercise Customization-1: Adapting a gallery example
**This is a great exercise which is very close to real life.**

- Browse the [Vega-Altair example gallery](https://altair-viz.github.io/gallery/index.html).
- Select one example that is close to your current/recent visualization project
  or simply interests you.
- First try to reproduce this example, as-is, in the Jupyter Notebook.
- Then try to print out the data that is used in this example just before the call of the plotting function
  to learn about its structure.
- Then try to modify the data a bit.
- If you have time, try to feed it different, simplified data.
  This will be key for adapting the examples to your projects.
:::

---

:::{keypoints}
- Browse a number of example galleries to help you choose the library
  that fits best your work/style.
- Figures for presentation slides and figures for manuscripts have
  different requirements.
- Think about color-vision deficiencies when choosing colors. There are color
  palettes optimized for this.
- Minimize manual post-processing and try to script all steps.
:::
